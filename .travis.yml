language: java
branches:
  only:
  - develop
  - master
  - release/.*
env:
  global:
  - secure: GBsEwsHQJ6jSHhOPwOJlFQeXqw7uEi7gICj0VSuDxi1JkQjlC2pBrB0D4HEzrb9mt6/pNz83yFzi7az8874jWYtSEtxzZCoUsyX2QiSiPM/BYYnmTnduPF0icVowrHw2f+kyNRuTIyKVT4jPeXNHnEFeXbDyOVQg0MjFqLG9kHg=
  - secure: NLZhf0neJnN/ED68X7jNpDZHNPASQxPL3KJULrI1zmjoxJT6Qpu5ncyzPii7kxN3OBZdIRCE4f5qYVH0xFEeKtLbV+YPK6wfQ+lxw0rmuOigwOJ5gqq/AJ+GR9qCCZ4PJnGQUUdPa1ln4gcvm2CGyRYOUuxLHYqJEYS4ao7P9OE=
  - secure: TTSpfeQzVcpbFwzrIVfIiUbdXiKnGQN5TtwNeDNnHE4TcsusNXl1q85o1uo2OnhjDbj8sDec5WaeN60EufU3fNIUzafn/fEAdVa4o69pJcsKVsoAx4zK5dnKeYB5sJ+d/BtIBad31gYhYZ1eaakH84Yzzxxc/7NKxvznzHtK2Ow=
  - secure: bivmHzTSrjlG3DGfCyF4DJYunPVx8B9M5c4KhSGcBd3ofm2GLHh5uqHXY+eO/gEyYhEIttf5v3O7EPwqJwm9qCkvLtrKxceKyPXVT+5YP/83NEHj9FKGYnlEMvIYwceVQkJnbaoZuDC1xSCxDQqowvk/H1k+TnVQKYNU3+dsgq4=
  - secure: USyKGcQu3/DcpvkhPWj11biDVP8wyin0F+PZpscw+WehqC68RyUUcnoBkumZeJpJ4y1Qvf4ixBBNBNtrSUW9FeMQmXb1iCV2UbfAOIVNbo151zW8ULKLC0H8uZb/iffmUBvmJQn8CrF/6tL4vvIboo7Ka89Bex3nb6nuGqIgc00=
  - secure: Wk8DcnywyeSGBuNWEQtshhOtPnj3dZWnfQLFeaEupRIEWmJFN1A8lGpmz4+5JzCQ/unV7AzqOdYSq1VDgvJtpzcgdIhxBsUcNQWp1CRo/wAuG4+/klWI3+Kdd8y9QXvvJMCm0/HizC1vN9Ytzwfl5auu/E6UKFu90hZHmIYifo8=
stages:
- name: Unit Tests
  if: branch = develop
- name: Staging
  if: branch =~ ^release
- name: Master
  if: branch = master
jobs:
  include:
  - stage: Unit Tests
    install: mvn --settings settings.xml -DskipTests=true -Dmaven.javadoc.skip=true
      -Pdevelop -B -V install
    script: mvn --settings settings.xml -Pdevelop clean test
  - stage: Staging
    before-install: chmod +x ./deploy.sh
    install: mvn --settings settings.xml -DskipTests=true -Dmaven.javadoc.skip=true
      -Pstaging -B -V install
    script: mvn --settings settings.xml -Dmaven.javadoc.skip=true -Pstaging -B -V
      clean test
    after_success: "./deploy.sh"
  - stage: Master
    install: mvn --settings settings.xml -DskipTests=true -Dmaven.javadoc.skip=true
      -B -V install
    script: mvn --settings settings.xml clean test
